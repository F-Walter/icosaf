<app-toolbar>
</app-toolbar>

<mat-sidenav-container class="example-container">

    <mat-sidenav mode="side" opened="true">

        <mat-selection-list #iconList [multiple]="false"
            (selectionChange)="onSelect(iconList.selectedOptions.selected[0].value)">

            <mat-list-option #dashboardIcon value="dashboard-icon">
                <div *ngIf="dashboardIcon.selected === true; then dashboardSelectedBlock else dashboardBlock"></div>
                <ng-template #dashboardSelectedBlock>
                    <mat-icon svgIcon="dashboard-icon-selected" aria-hidden="false"
                        aria-label="Example of dashboard SVG icon selected"></mat-icon>
                </ng-template>
                <ng-template #dashboardBlock>
                    <!-- <mat-icon aria-hidden="false" aria-label="Example home icon">home</mat-icon> -->
                    <mat-icon svgIcon="dashboard-icon" aria-hidden="false" aria-label="Example of dashboard SVG icon"
                        (click)="navigateTo('dashboard')">
                    </mat-icon>
                </ng-template>
            </mat-list-option>

            <mat-divider></mat-divider>

            <mat-list-option #settingIcon value="setting-icon">

                <div *ngIf="settingIcon.selected === true; then settingSelectedBlock else settingBlock"></div>
                <ng-template #settingSelectedBlock>
                    <mat-icon svgIcon="setting-icon-selected" aria-hidden="false"
                        aria-label="Example of setting SVG icon">
                    </mat-icon>
                </ng-template>

                <ng-template #settingBlock>
                    <mat-icon svgIcon="setting-icon" aria-hidden="false" aria-label="Example of setting SVG icon">
                    </mat-icon>
                </ng-template>

            </mat-list-option>

            <mat-divider></mat-divider>

            <mat-divider></mat-divider>

            <span id="verticalFiller"></span>

            <mat-divider></mat-divider>

            <div *ngIf="isLogged(); then logged else unlogged"></div>
            <ng-template #logged>
                <div id="logIcon" value="logout-icon">
                    <mat-icon svgIcon="logout-icon" aria-hidden="false" aria-label="Example of logged SVG icon"
                        (click)="changeLogged()"></mat-icon>
                </div>
            </ng-template>
            <mat-divider></mat-divider>
            <ng-template #unlogged>
                <div id="logIcon" value="logout-icon">
                    <mat-icon svgIcon="login-icon" aria-hidden="false" aria-label="Example of logout SVG icon"
                        (click)="openDialog()">
                    </mat-icon>
                </div>

                <mat-divider></mat-divider>
            </ng-template>


        </mat-selection-list>

    </mat-sidenav>

    <mat-sidenav-content>

        <div class="externalHorizontalContainer">

            <div class="cardsContainer">
                <mat-card class="example-card" *ngFor="let workArea of workAreas">
                    <mat-card-header>
                        <mat-card-title>
                            <p class="titleCard">Area di Lavoro {{workArea.id}}</p>
                        </mat-card-title>
                    </mat-card-header>
                    <mat-card-content>
                        <div class="horizontalContainer">
                            <mat-list role="list">
                                <mat-list-item *ngFor="let agv of workArea.agvList" role="listitem">
                                    <p #paragrafo>
                                        <span class="dangerIconWrapper">
                                            <mat-icon class="card-icon" *ngIf="agv.getError()" svgIcon="danger-icon"
                                                aria-hidden="false" aria-label="Example danger SVG icon"
                                                style="margin-right: 5%;">
                                            </mat-icon>
                                        </span>
                                        AGV
                                        {{workArea.id}}.{{agv.id}} </p>
                                    <div style="width: 100%;">
                                        <mat-progress-bar #progressVal mode="determinate" [value]="agv.getProgress()">
                                        </mat-progress-bar>
                                        <span class="percentageProgressBar"
                                            [ngStyle]="{'left':  (agv.getProgress()) +'%'}">
                                            <div *ngIf="agv.getError(); then errorBlock else correctBlock"></div>
                                            <ng-template #errorBlock>
                                                <mat-icon class="card-icon" *ngIf="agv.getError()" svgIcon="error-icon"
                                                    aria-hidden="false" aria-label="Example error SVG icon">
                                                </mat-icon>
                                            </ng-template>
                                            <ng-template #correctBlock>
                                                <div
                                                    *ngIf="agv.getProgress() === 100; then successBlock else progressBlock">
                                                </div>
                                                <ng-template #successBlock>
                                                    <mat-icon class="card-icon" svgIcon="success-icon"
                                                        aria-hidden="false" aria-label="Example error SVG icon">
                                                    </mat-icon>
                                                </ng-template>
                                                <ng-template #progressBlock>
                                                    <span class="percentageProgressBar">{{agv.getProgress()}}%
                                                    </span> </ng-template>
                                            </ng-template>

                                        </span>
                                    </div>




                                </mat-list-item>
                            </mat-list>
                            <div name="statistics">

                                <mat-accordion>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Tempo ciclo medio
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <p>I'm visible because I am open</p>
                                    </mat-expansion-panel>
                                </mat-accordion>

                                <mat-accordion>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                Saturazione media
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <p>I'm visible because I am open</p>
                                    </mat-expansion-panel>
                                </mat-accordion>

                                <mat-accordion>
                                    <mat-expansion-panel>
                                        <mat-expansion-panel-header>
                                            <mat-panel-title>
                                                JPH media
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                        <p>I'm visible because I am open</p>
                                    </mat-expansion-panel>
                                </mat-accordion>

                            </div>
                        </div>
                    </mat-card-content>
                    <!-- <mat-card-actions>
                    <button mat-button>LIKE</button>
                    <button mat-button>SHARE</button>
                </mat-card-actions> -->
                </mat-card>
            </div>

            <router-outlet></router-outlet>

        </div>

    </mat-sidenav-content>

</mat-sidenav-container>